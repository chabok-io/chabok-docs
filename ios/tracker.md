---  
id: tracker  
title: ترکر نصب  
layout: ios  
permalink: ios/tracker.html  
prev: sdk-setup.html  
next: chabok-messaging.html  
---  

## مفاهیم اولیه
---

### ترکر

در موبایل مارکتینگ **لینکی** است که همراه کمپین‌های تبلیغاتی گذاشته می‌شود تا عملکرد آن‌ها را ارزیابی کند. 
 به عبارت دیگر ابزاری است که به بازاریاب‌ها کمک می‌کند تا بتوانند کمپین‌های تبلیغاتی خودشان را در کانال‌های مختلفی منتشر کنند و عملکرد هر کدام رو جدا بررسی کنند.

  
نباید به ترکر تنها به عنوان یک ابزار شمارشی نگاه کرد. یک ترکر می‌تواند کمک کند تا بتوانید ارزش هر شبکه تبلیغاتی را بهتر بشناسید و تصمیم بگیرید که بودجه خود را چگونه می‌توانید بهینه‌تر خرج کنید.

 به عنوان مثال در نظر بگیرید که دو شبکه تبلیغاتی الف و ب برای شما کمپین اجرا کرده‌اند. شبکه تبلیغاتی الف به شما تعداد نصب خیلی کمتری نسبت به شبکه تبلیغاتی ب می‌دهد، اما شبکه تبلیغاتی الف درآمد بیشتری نسبت به شبکه تبلیغاتی ب تولید کرده است. در نگاه اول درست است که شمارش نصب کمپین ب بیشتر بوده است و بهتر است که با شبکه تبلیغاتی ب ادامه بدهید اما وقتی آمار **KPIهای کلیدی** را مشاهده می‌کنید، شبکه تبلیغاتی الف ارزشمند‌تر است هرچند تعداد نصب کمتری نسبت به شبکه تبلیغاتی ب داشته است.
 
<br>

### اتریبیوشن

به فرایند **نسبت دادن** یک عمل رخ داده در اپلیکیشن (نمایش، کلیک، نصب، اولین باز شدن اپ و…) به یک ترکر، اتریبیوشن گفته می‌شود.

<br>

### مفهوم نصب در چابک

در چابک نصب زمانی شمرده می‌شود که کاربر علاوه بر نصب، اپلیکیشن شما را برای **اولین بار باز کند**. این شیوه شمارش باعث می‌شود تا کیفیت نصب‌هایی که دریافت می‌کنید بالاتر برود.

<br>

### نصب‌های رد شده یا تقلبی (Fraud)

در چابک همه نصب‌ها مورد قبول نیستند. بعضی از نصب‌ها به خاطر رفتار مشکوک و غیر طبیعی رد می‌شوند (نصب شمرده نمی‌شوند یا به ترکر ارگانیک نسبت داده می‌شوند و در واقع به هیچ ترکری نسبت داده نمی‌شوند). برای مطالعه بیشتر [اینجا](/ios/tracker.html#مکانیزم-ضد-تقلب-fraud-prevention) را کلیک کنید.

<br>

### نصب‌ یا اتریبیوشن مجدد (Re-attribution)

به بازگرداندن یک کاربر پس از مدت قابل توجهی از عدم فعالیت و یا پاک کردن اپلیکیشن، اتریبیوشن مجدد گفته می‌شود.

<br>

### نصب‌های ارگانیک

به طور کلی نصبی که هیچ کمپینی (ترکری) عامل آن نباشد، ارگانیک گفته می‌شود. این دسته از نصب‌ها نسبت به بقیه کیفیت بالاتری دارند زیرا که کاربران بدون تبلیغ به استفاده از اپ شما روی آورده‌اند.

 البته باید در نظر داشت که بخشی از نصب‌های رد شده نیز در ترکر ارگانیک گنجانده می‌شوند که آمار این نصب‌ها قابل بررسی است.
    
<br>

### رویداد (Event)

به رویدادهایی گفته می‌شود که در یک اپلیکیشن تنظیم می‌شوند و به شما کمک می‌کند تا بتوانید **رفتار** کاربر خود را بهتر بررسی کنید و براساس آنها برای توسعه محصول و کمپین خود تصمیم بگیرید. این رویدادها به دو دسته **سیستمی** (پیش‌فرض چابک) و **سفارشی** (خودتان با توجه به محصول خود می‌توانید تصمیم بگیرید مثلا فروشگاه‌ها رویداد سفارش و خرید را کلیدی می‌دانند) تقسیم می‌شوند.

با رصد و ردیابی رویدادها می‌توانید مدل کمپین‌های خود را **[CPA یا CPG](/panel/tracker.html#%D8%A7%D9%81%D8%B2%D9%88%D8%AF%D9%86-%D8%B1%D9%88%DB%8C%D8%AF%D8%A7%D8%AF-%D9%85%D8%AF%D9%84-cpa)** (هزینه براساس اکشن یا هدف) اجرا کنید.

<br>

### نرخ حذف

هر بار که اپلیکیشن شما از یک دستگاه حذف می‌شود، در چابک یک حذف شمرده می‌شود.

<br>

### نرخ ریزش

در چابک یک کاربر ممکن است با چند دستگاه (مثلا تبلت یا موبایل یا کامپیوتر رومیزی و…) شناخته شود. اگر کاربر **تمامی راه‌های ارتباطی با محصول شما را حذف کند**، در چابک یک ریزش شمرده می‌شود.

<br>

### پنجره اتریبیوشن (Attribution Window)

به محدوده زمانی که طول می‌کشد تا کاربر یک عمل (Action) را انجام دهد گفته می‌شود. باید در نظر داشت که عمدتا این پنجره برای نصب در نظر گرفته می‌شود، طوری که می‌توانید تعیین کنید چه مقدار زمان بین کلیک و نصب برای شما قابل قبول است.

<br><br>

## شروع به کار
---

برای استفاده از چابک در اجرای کمپین‌های خود باید در ابتدا باید **SDK** چابک را اپلیکیشن یا وب سایت خود پیاده کنید. برای مشاهده مستندات فنی [اینجا](/ios/sdk-setup.html) را کلیک کنید.

### ساخت ترکر

قبل از ساختن ترکر بهتر است با انواع آن آشنا شویم:

### انواع ترکر

- ترکرهای ساده

این نوع ترکرها در هر جایی قابل استفاده هستند و شما می‌توانید تمامی موارد از قبل تنظیم شده را در اینجا بشمارید.

-  ترکرهای نتورک‌های خاص (شبکه‌های تبلیغاتی)

در صورتی که بخواهید با یک اد نتورک خاص در ایران، کمپین تبلیغات اجرا کنید، چابک می‌تواند برای بهبود کیفیت کمپین شما پارامترهای مورد نظر اد نتورک را به آنها بدهد تا بتوانند با استفاده از این کمپین‌ها کیفیت کمپین شما را بهتر کنند.

- ترکر گوگل ادز

چابک می‌تواند به شما کمک کند که نصب‌هایی که از طریق گوگل ادز یا UAC (Universal Ad Campaign) اجرا می‌کنید را بررسی کنید. برای مطالعه موارد تکمیلی به بخش [نحوه شمارش ترکر](/ios/tracker.html#نحوه-شمارش-و-کارکرد-چابک) مراجعه کنید.
  
- ترکر کافه بازار

چابک می‌تواند به شما کمک کند که نصب‌هایی که از طریق کافه بازار یا تپسل اجرا می‌کنید را بررسی کنید. برای مطالعه موارد تکمیلی به بخش نحوه شمارش ترکر مراجعه کنید.

### مراحل ساخت یک ترکر

ساخت ترکر از طریق پنل انجام می‌شود. برای مشاهده نحوه ساخت ترکر می‌توانید به [مستندات پنل](/panel/tracker.html#%D8%A7%DB%8C%D8%AC%D8%A7%D8%AF-%D8%AA%D8%B1%DA%A9%D8%B1) مراجعه کنید.

**نمونه لینک ترکر چابک**:  
  
حساب‌ رایگان:  
  
```javascipt  
https://sand.chabok.io/JY@4sc  
```    
حساب عملیاتی:  
  
```javascipt  
https://a.chabok.io/JY@4sc  
```    
<br>

#### سطح بندی ترکر

برای اینکه بتوانید به کمپین‌های خود نظم و دقت بیشتری بدهید تا در هنگام بررسی آمارها تحلیل‌های درست‌تری داشته باشید باید بتوانید ترکر خود را به شکل اصولی سطح بندی کنید.

<br><br>

## رصد رویدادها (رفتار یا اهداف تبلیغ)
---
برای پیاده‌سازی به صفحه [رصد رفتار درون‌برنامه‌ای](/ios/behavior-tracking.html) مراجعه کنید. پس از آن با انواع رویداد‌ها در چابک آشنا می‌شویم:

### ۱. رویداد‌های سیستمی (پیش‌فرض در چابک)

رویداد‌هایی که به طور پیش فرض بدون نیاز به پیاده‌سازی خاصی تنها با استفاده از چابک بررسی می‌شوند. مثلا اولین ورود، اطلاعات گوشی و… .

<br>

### ۲. رویداد‌های غیر سیستمی یا سفارشی (Custom Events)

این رویداد‌ها **توسط شما تعریف و پیاده‌سازی می‌شوند**. شما می‌توانید تا سقف ۳۰۰ رویداد و ۱۰۰ زیر رویداد یا اتریبیوت در اپلیکیشن خود داشته باشید.

یکی از مهم‌ترین بخش‌هایی که می‌تواند به شما در تحلیل اپ به شما کمک کند، رویداد‌های سفارشی است. هرچه آن‌ها دقیق‌تر انتخاب شوند، می‌توانند به شما کمک کنند تا بتوانید هم رفتار کاربران را به درستی تحلیل کنید و هم بتوانید در زمان تعامل مجدد (re-engage) با آن‌ها موثرتر عمل کنید.

> `نکته:` اگر از CPA/CPO (یا در کل **رویدادهایی که خارج از اپلیکیشن رخ می‌دهند** مانند خرید) استفاده می‌کنید، دقت کنید که حتما از [وب‌سرویس چابک](/rest-api/send-event.html#%D8%A7%D8%B1%D8%B3%D8%A7%D9%84-%D8%B1%D9%88%DB%8C%D8%AF%D8%A7%D8%AF-track) استفاده کنید. 

<br><br>

## نحوه شمارش و کارکرد چابک
---

### نحوه کارکرد چابک برای شمارش نصب و بقیه رویداد‌ها

نصب از دید چابک زمانی اتفاق می‌افتد که کاربر برای اولین بار اپ شما را باز کند. نصب (یا هر رویداد دیگر) به آخرین ترکری که کاربر قبل از باز کردن اپلیکیشن روی آن کلیک کرده باشد، نسبت داده می‌شود.

<br>
  
##### روش آی‌دی یا دیفالت ترکر (Pre-Install Campaigns)  
 
شما می‌توانید منبع (Source) نصب را در کمپین‌های خود بفهمید. برای انجام این کار باید در ابتدا ترکر خود را در پنل ایجاد کنید، **آی‌دی ترکر** را در متد زیر قرار دهید و پس از گرفتن خروجی ipa گرفتن آن را در استور مورد نظر بگذارید. 

{% tabs %}
{% tab OBJECTIVE-C %}

```objectivec
[_manager setDefaultTracker:@"YOUR_TRACKER_ID"];
```
{% endtab %}
{% tab SWIFT %}

```swift
_manager?.setDefaultTracker("YOUR_TRACKER_ID");
```
{% endtab %}
{% endtabs %}

>`نکته:` دقت داشته باشید که `TRACKER_ID` شناسه ۶ کاراکتری است که در لینک ترکر شما وجود دارد. به عنوان مثال در لینک `https://sand.chabok.io/JY@4sc` آی‌دی ترکر `JY@4sc` می‌باشد. این آی‌دی را می‌توانید از پنل>ترکر>جزئیات ترکر مانند تصویر زیر کپی کنید:
   
![عکس مربوط](http://uupload.ir/files/bjbc_tracker-analytics-s.png)  
  
<br><br>
      
### کال‌بک‌های ترکر (Callback)  
--- 

در صورتی هم که می‌خواهید داده‌های ترکر را در سیستم‌های دیگر از جمله سرورهای خود دریافت کنید می‌توانید از کال‌بک استفاده کنید. این کار را می‌توانید از پنل هنگام ایجاد ترکر جدید انجام دهید. به این ترتیب لینکی که می‌خواهید زمان رخ دادن رویداد (کلیک یا نصب) فرخوانی شود را وارد می‌کنید.   
  
همچنین شما می‌توانید در کال‌بک خود از پارامترهایی برای اطلاعات بیشتر از مبدا رویداد کسب کنید. برای مشاهده این پارامترها و نمونه لینک کال‌بک می‌توانید به مستندات [پنل](/panel/tracker.html#کالبک) مراجعه کنید.  

<br><br>

### قابلیت دعوت دوستان  
---

یکی از راههای موثر برای جذب کاربران به اپلیکیشن، ارسال لینک دعوت به آن‌هاست. روش‌های زیادی برای ارسال لینک دعوت به کاربران وجود دارد که برای مثال یک نمونه از آن را توضیح خواهیم داد. 

فرض کنید یک تعداد از کاربران، اپلیکیشن شرکت در رویداد را نصب  و در رویدادی ثبت نام کردند، برای جذب کاربران بیشتر در اپلیکیشن نیاز است لینک دعوتی به آن‌ها ارسال کنید تا لینک را با دوستان خود به اشتراک بگذارند، با کلیک کاربران جدید بر روی لینک دعوت، به صفحه نصب اپلیکیشن به طور خودکار هدایت می‌شوند و به طور مثال کاربران دعوت‌کننده نیز کد تخفیفی برای شرکت در رویدادهای بعدی دریافت خواهند کرد. 

<h4>ایجاد لینک دعوت دوستان</h4>

برای ایجاد لینک دعوت دوستان از طریق خود اپلیکیشن کافیست در انتهای لینک ترکر نصب، پارامتر `lable` را اضافه کنید.

برای اینکه متوجه شوید نصب اپلیکیشن انجام شده و دعوت‌نامه  به کاربر دیگر ارسال شده، نیاز به پیاده‌سازی متد `chabokReferralResponse:(NSString *)referralId` به کمک کد زیر را دارید.

{% tabs %}
{% tab OBJECTIVE-C %}

```objectivec
-(void) chabokReferralResponse:(NSString *)referralId {
    // received referralId
}
```
{% endtab %}
{% tab SWIFT %}

```swift
func chabokReferralResponse(_ referralId: String!) {
    // received referralId
}
```
{% endtab %}
{% endtabs %}

>`نکته`: **lable** مقداری هست که در انتهای لینک ترکر نصب گذاشته می‌شود و با هر بار کلیک کاربر بر روی لینک، کاربر به صفحه نصب اپلیکیشن هدایت می‌شود. این مقدار از طریق فراخوانی متد گفته شده قابل دریافت است.

 
اگر قصد دارید لینک دعوت به دوستان را در حساب آزمایشی به کاربران ارسال کنید، کافیست لینک ترکر خود را به فرمت زیر در اپلیکیشنتان استفاده کنید.

```java
https://sand.chabok.io/GgKoAT?label=user_1001
```
اگر در حساب عملیاتی، خواستید لینک ترکر را به کاربران ارسال کنید باید لینک ترکر را به شکل زیر در اپلیکیشن‌‌تان استفاده کنید.

```java
https://a.chabok.io/GgKoAT?label=user_1001
```

>`نکته`: برای پیاده‌سازی قابلیت دعوت دوستان کافیست در انتهای لینک ترکر نصب به جای user_1001، شناسه کاربری شخص دعوت‌کننده را قرار دهید. 

<br><br>  
  
### مکانیزم ضد تقلب (Fraud Prevention)  
---

SDK چابک به گونه‌ای پیاده‌سازی شده است که امکان تقلب و نصب غیر واقعی در روش‌های مبتنی بر نصب و رفتار (CPA و CPI) را به طور کامل از بین می‌برد. علاوه بر آن، به هیج وجه فراخوانی و رصد رویداد‌های چابک قابل دستکاری نیستند.   
  
مواردی که چابک برای حذف تقلب انجام می‌دهد عبارتند از:  
  
- **IP Filtering**:  
  
آی‌پی کاربر را در زمان کلیک و نصب تطبیق می‌دهد، جلوی نصب‌های متعدد با یک آی‌پی را می‌گیرد و همچنین آی‌پی‌های ناشناخته را رد می‌کند.  
  
- **User Verification**:  
  
با توجه به ساختار کاربر محور بودن سیستم چابک، تمام اطلاعات کاربر در کلیک و نصب را مقایسه می‌کند تا واقعی بودن کاربر جذب شده مشخص شود.  
  
- **SDK Signature**:  
  
روی SDK امضای خاصی را می‌گذارد تا هنگام کلیک دریافت شود و پس از نصب با اپلیکیشن شما تطبیق داده شود. همچنین یکی از راه‌های مقابله با **SDK Spoofing** است. SDK Spoofing یکی از راه‌های تقلب است که نصب‌ها را روی دستگاه‌های واقعی شبیه‌سازی می‌کند و آن را جزو نصب‌های کمپین محاسبه می‌نماید. این کار معمولا از اپلیکیشن‌های دیگر روی دستگاه صورت می‌گیرد و نصب‌های بی‌شمار غیر واقعی را وارد کمپین‌ شما می‌کند.  
  
  
- **Server to Server Verification**:  
  
اطلاعات کاربر را هنگام کلیک جمع‌آوری می‌کند و با اطلاعاتی که سرور شما در هنگام نصب دریافت می‌کند اعتبارسنجی می‌نماید؛ در صورت عدم تطابق، نصب را رد می‌کند.  
  
- **TTI**:  
  
زمان قابل قبول بین کلیک و نصب است. چابک به طور خودکار فاصله زمانی بسیار کوتاه را رد می‌کند و همینطور در صورتی که از محدوده‌ای که شما تعیین کرده‌اید بیشتر شود ([محدوده اتریبیوشن](/panel/tracker.html#محدوده-اتریبیوشن))، نصب شمرده نخواهد شد.  
  
- **Two-Phase Authentication**:  
  
احراز هویت برای تشخیص واقعی بودن کاربر در هنگام نصب است. در چابک این کار از طریق ارسال پیام کوتاه انجام می‌شود.  
