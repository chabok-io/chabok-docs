---
id: send
title: ایجاد کمپین
layout: panel
permalink: panel/send.html
prev: segment.html
next: inbox.html
---

این بخش به شما امکان می‌دهد با کاربرانتان ارتباط برقرار کنید و برای آن‌ها **کمپین** ارسال کنید. شما می‌توانید کمپین‌هایتان را با استفاده از قابلیت‌هایی مثل **گروه‌بندی پیشرفته** (Segmentation)، **تعیین زمان** برای ارسال **خودکار** کمپین، بررسی **پیش‌نمایش پیام**، پوش براساس **موقعیت مکانی** و ... **هدفمند** کنید.

<Br>

#### مخاطبان پیام (User targeting)

در این قسمت شما می‌توانید مخطبان پیامتان را به ۴ روش انتخاب کنید. این روش‌ها عبارتند از **سگمنت**، **کانال**، **خصوصی** و **از فایل**:

##### سگمنت

 سگمنت یا **گروه‌بندی پیشرفته** به شما این امکان را می‌دهد تا مخاطبان پیامتان را با ترکیب فیلتر‌های متعدد چابک گروه‌بندی کنید و هر کدام را با نام دلخواهتان ذخیره کنید. این سگمنت‌ها براساس معیارهای **عمومی** (تگ، دسترسی نوتیفیکیشن و موقعیت مکانی)، **بازدید**، **فناوری** و **کانال جذب**، **اطلاعات کاربر** و **رفتار کاربر** ایجاد شده‌اند.

> `نکته:` برای آشنایی بیشتر با سگمنت و نحوه استفاده از آن [این صفحه](/panel/segment.html) را مطالعه کنید.

![عکس مربوطه](http://uupload.ir/files/wr00_segment-send.png)

<Br>

##### کانال

 اگر می‌خواهید یک **پیام عمومی** را برای تمام اعضای یک کانال ارسال کنید، در این قسمت کانال مورد نظرتون را انتخاب کنید و پیامتان را منتشر کنید.

##### خصوصی

 در این قسمت می‌توانید پیام **شخصی‌سازی شده** برای **یک کاربر** به خصوص بفرستید؛ فقط کافیه پس از انتخاب کانال ارسالی، **شناسه** آن کاربر را وارد نمایید.

##### از فایل

این گزینه برای آپلود **شناسه‌های کاربرانتان** از طریق فایل CSV است. این بخش به شما کمک می‌کند تا با توجه به اطلاعاتی که در دیتابیس خود از کاربرانتان دارید، گیرندگان پیام را **به دلخواه** انتخاب کنید و به آن‌ها پوش بفرستید.

نمونه فایلی که در این بخش باید آپلود کنید:

![عکس مربوطه](http://uupload.ir/files/ujmr_file-example2.png)

سپس فایل مورد نظر را با فرمت CSV مانند زیر ذخیره کنید:

![عکس مربوطه](http://uupload.ir/files/6k8b_save-as-csv.png)

>`نکته:` دقت داشته باشید که فایل CSV شما به صورت **CRLF** باشد. همچنین فرمت‌های (CSV (Macintosh و (CSV UTF-8 (Comma delimited پشتیبانی **نمی‌شوند**.

با داشتن فایل، آن را در بخش **گیرندگان** می‌توانید آپلود کنید:

![عکس مربوطه](http://uupload.ir/files/7569_send-by-file.png)

<Br>

#### تعیین زمان ارسال (Scheduled Push)

در این قسمت شما می‌توانید برای پیام‌های متنی خود **زمان ارسال** تعیین کنید. بسته به نوع پیامتان قادر خواهید بود، زمان ارسال خود را در حال حاضر (**هم‌اکنون**)، یک زمان خاص (**زمان‌بندی شده**)، یک بازه زمانی برای تکرار آن (**تکرار شونده**) و یا به صورت **خودکار** تعیین کنید.

![عکس مربوطه](http://uupload.ir/files/0cfs_screenshot.png)

<Br>

##### هوشمند
ارسال هوشمند، پیام‌های شما را **به هر کاربر در زمانی که بیش‌ترین بازدید** را داشته است می‌فرستد. این بهترین روشی است تا نرخ تبدیل پیام‌هایتان را بهینه کنید.

به عنوان مثال کاربری به طور معمول **هر روز ساعت ۱۰ صبح** از وبسایت یا اپلیکیشن شما استفاده می‌کند. چابک زمان این بازدیدها را رصد و ذخیره می‌کند و از آن برای تعیین پر بازدید ترین ساعت کاربر استفاده می‌کند.

پیام‌هایی که از این طریق ارسال می‌کنید **حداکثر تا ۲۴ ساعت** به کاربر تحویل داده می‌شود. مثلا اگر پیام را ساعت ۵ عصر ارسال کنید و کاربر همان ۱۰ صبح بیش‌ترین بازدید را داشته باشد، پیام شما ۱۷ ساعت بعد تحویل داده خواهد شد.

علاوه بر آن شما می‌توانید تعیین کنید که **محدوده ساعات ارسالی پوش بین چه ساعت‌هایی باشد**. در این صورت اگر زمان پر کاربرد کاربر درون این محدوده باشد در همان ساعت ارسال می‌شود و اگر خارج آن قرار بگیرد، چابک خودش به طور هوشمند در محدوده انتخابی شما پوش را ارسال می‌کند.

![عکس مربوطه](http://uupload.ir/files/cclg_smart-push.png)

>`نکته:` قابلیت ارسال هوشمند به طور پیش‌فرض در پنل غیر فعال است و برای استفاده از آن باید به طور اختصاصی درخواست دهید.
<Br>

##### پوش خودکار (Automated Push)

یکی از گزینه‌های زمان ارسال، گزینه **خودکار** است که به شما امکان می‌دهد تا **براساس یک رویداد**، پوش خود را کار بگذارید. برای استفاده از پوش خودکار کافی است نام **رویداد فعال کننده** پوش را وارد کنید، سپس زمانبندی آن را مشخص نمایید. زمانبندی را می‌توانید براساس روزهای هفته تعیین کنید که پوش شما فقط در آن زمان‌ها **فعال** باشد. پس از آن باید محدودیت تعداد ارسال پوش را در زمان مشخص معین کنید.

>`نکته:‍` برای دریافت پوش خودکار، کاربر باید **در لحظه وقوع رویداد در سگمنت قرار داشته باشد**.

همینطور می‌توانید برای پوش خودکار خود **تاخیر** (Delay) بگذارید. این تاخیر می‌تواند همراه با یک رویداد لغو کننده باشد. مثلا شما می‌خواهید برای کاربرانی که به سبد خرید خود محصولی را اضافه کرد‌ه‌اند اما خرید را نهایی نکردند پوش خودکار بفرستید. در این صورت زمان دلخواه تاخیر ارسال با رویداد متوقف کننده **خرید** را مشخص می‌کنید. 

> ‍‍‍`نکته:` برای آشنایی بیشتر با تعیین و رصد این رفتارها صفحه **رصد رفتار درون‌برنامه‌ای** را در مستندات ([اندروید](https://doc.chabok.io/android/event-tracking.html)، [آی‌اواس](https://doc.chabok.io/ios/event-tracking.html) و [وب](https://doc.chabok.io/javascript/event-tracking.html))  مطالعه نمایید.

در آخر هم می‌توانید گزینه **براساس دستگاه** را برای متوقف شدن پوش در صورت وقوع رویداد پایانی روی همان دستگاهی که رویداد اول رخ داده است، روشن کنید. همینطور گزینه **لغو در صورت خروج از سگمنت** را هم می‌توانید برای لغو پوش برای کاربرانی که از سگمنت تعیین شده خارج شده‌اند استفاده کنید.

![عکس مربوطه](http://uupload.ir/files/95d_send-time.png)

<Br>

##### پوش خودکار در صورت رخ ندادن یک رویداد

از تاخیر می‌توانید برای **خودکارسازی ارسال پوش برای کاربرانی که مدتی است رویدادی را انجام  نداده‌اند** هم استفاده کنید. به این ترتیب که شما یک رویدادی را (مثلا خرید) انتخاب می‌کنید تا در صورتی  که کاربران بیش از ۷ روز آن را انجام ندهند، پوش ارسال شود. برای فعال‌سازی کافی‌ است رویداد فعال کننده را خرید بگذارید و با تاخیر ۷ روز، رویداد متوقف کننده را هم خرید قرار دهید. تصویر زیر نمونه‌ای از این حالت را نشان می‌دهد.

![عکس مربوطه](http://uupload.ir/files/e1ef_autopush-if-event-didnt-occur.png)

<Br>

#### سیاست ارسال

به طور کلی پیام‌ها در چابک از **۴** طریق (کانال) ارسال می‌شوند. این ۴ طریق عبارتند از **صندوق پیام** (از سوکت‌های مخصوص چابک)، **پوش‌نوتیفیکیشن** (از سرویس‌های گوگل، اپل و مایکروسافت)، **ایمیل** و **پیامک.** 

از این رو، سیاست‌های ارسال بر اساس این ۴ طریق (به صورت مجزا یا ترکیبشان) ایجاد شده‌اند. از بین **۵** سیاست ارسال چابک، ۲ تا از آن‌ها ترکیبی هستند (صندوق پیام و هشمند).

- **صندوق پیام**: چابک به طور **خودکار** از هر دو روش (صندوق پیام و پوش‌نوتیفیکیشن) برای ارسال کمپین استفاده می‌کند. به این ترتیب که اگر اپلیکیشن روی دستگاه کاربر **باز** باشد، **پیام چابک** ارسال می‌شود و اگر اپلیکیشن **بسته** باشد، یک **نوتیفیکیشن** برای آوردن کاربر به اپلیکیشن استفاده می‌شود. (در صورتی که می‌خواهید پوش‌نوتیفیکیشن را از این سیاست حذف کنید، کافیست در سیاست تحویل درون‌برنامه‌ای را انتخاب کنید.)

- **هوشمند**: این سیاست همانند صندوق پیام است، با این تفاوت که  درصورت آنلاین نبودن کاربر به جای پوش‌نوتیفیکیشن، **پیامک** ارسال خواهد شد.

![عکس مربوطه](http://uupload.ir/files/ou44_politics-send.png)

<Br>

#### محتوای پیام

در این قسمت شما **محتوای** پیام (عنوان و محتوا) خود را می‌نویسید و پس از آن می‌توانید با پیش‌نمایش **اندروید**، **آی‌اواس** و **وب** آن را قبل از ارسال بررسی نهایی کنید.

در صورتی که می‌خواهید متن پیام برای متن نوتیفیکیشن هم قرار بگیرد، گزینه **متن اعلان با متن پیام یکی باشد** را روشن کنید.

##### شخصی‌سازی محتوا

در صورتی که می‌خواهید **نرخ تبدیل** کمپین‌های خود را بالا ببرید، می‌توانید محتوای نوتیفیکیشن‌های خود را براساس **اطلاعات، خصوصیات و رفتار کاربران** (همان‌هایی که در سگمنت هم از آن استفاده می‌کنید) شخصی‌سازی کنید. 

فقط کافیست دکمه **{}** را در فیلدهای **عنوان و متن پیام** کلیک کنید و خصوصیات مورد نظر خود را انتخاب کنید.

چابک این خصوصیات را به مقدار سفارشی هر کاربر تبدیل می‌کند. در صورت پیدا نکردن مقدار مختص کاربر، چابک یا آن‌ را خالی می‌گذارد یا در صورت استفاده از مقدار پیش‌فرض (**default**) همان را قرار خواهد داد.

![enter image description here](http://uupload.ir/files/x9y2_message-personalization.png)
<br>

به عنوان مثال شما می‌خواهید هر کاربر را به **نام** خودش خطاب قرار دهید؛ در این صورت می‌توانید از **اطلاعات کاربر (Attribute)** استفاده کنید. 

- یا در استفاده پیچیده‌تر می‌توانید **اطلاعات یک رفتار** را سفارشی کنید:


 مثلا کاربر یک آیتمی را به **سبد خرید خود افزوده است** و شما می‌خواهید به هر کاربر یادآوری کنید که آیتمشان هنوز موجود است و هنوز فرصت دارند خرید را تکمیل کنند. در این حالت بهتر است **نام آیتمی** که به سبد خرید هر کاربر اضافه شده است برایشان ارسال شود تا با شناخت آن انگیزه بیش‌تری برای خرید داشته‌باشند.
 
 در این حالت باید از کد زیر به جای نام آیتم در متن پیامتان قرار دهید. 

{% raw %}

**متن پیام در پنل**:

 {{user['firstName']}} عزیز، هنوز {{user[event['add_to_cart']['value'] + 'name']}} رو تو سبدتون دارید. تا تموم نشده بخریدش!

{% endraw %}

**متن دریافتی پیام کاربر**: 

**مرجان** عزیز، هنوز **گوشی موبایل شیائومی مدل Mi A1 دوسیم کارت ظرفیت 32 گیگابایت** رو تو سبدتون دارید. تا تموم نشده بخریدش!


>`نکته:` دقت داشته باشید در مثال بالا، ارتباط  رفتار و اطلاعات کاربر را برقرار کنید. یعنی مثلا مقداری  که (value) به رفتار داده‌اید را در اطلاعات کاربر **(User Attributes)** بگذارید و نام آیتم را به آن مقدار اختصاص دهید.

- همچنین در شخصی‌سازی پیام می‌توانید از شرط (if و else) استفاده کنید. طوری که مثلا اگر کاربر دستگاهش اندروید بود، محتوای پیام متناسب آن ارسال شود:

{% raw %}
```
{% if deviceType == "android" %}
پلی‌استور
{% else %}
وبسایت
{% endif %}
```
{% endraw %}

دقت داشته باشید که if را پایان دهید.

##### فیلترهای شخصی‌سازی محتوا

در این بخش می‌توانید پیام‌های شخصی‌سازی شده خود را فیلتر کنید.

- `date`

اگر بخواهید از فیلتر **date** در متن پیام پنل خود استفاده کنید باید به شکل نمونه زیر بنویسید.

{% raw %}
```
{{abc | date("jYYYY")}}
```
{% endraw %}

به مثال زیر توجه کنید:

مثلا فرض کنید کد تخفیفی به کاربرانی که در طی هفته گذشته از اپلیکیشن شما خرید کردند، ارسال کردید و تاریخ انقضا این کد تخفیف در ۱۳۹۸/۰۹/۲۵ به پایان می‌رسد.

اگر **date** به فرمت تاریخ شمسی باشد، باید نمونه زیر را در متن پیام پنل خود قرار دهید.

**jYYYY/jM/jD HH:mm:ss** -> **1398/9/25 12:51:15**

در صورتی که می‌خواهید تاریخ به فرم میلادی باشد باید از نمونه زیر استفاده کنید.

**YYYY/M/D HH:mm:ss**  -> **2019/12/16 12:51:15**


- `locale`

اگر قصد دارید در متن پیام کاربر، عدد نمایش دهید، باید از فیلتر `locale` استفاده کنید.

مثلا کاربری یک آیتمی را از اپلیکیشنی خرید کرده و برای تکمیل خرید باید مبلغ ۲۰۰,۰۰۰ ریال را پرداخت کند. در این حالت متن پیام در پنل به شکل زیر خواهد بود:
 
{% raw %}
```
{{abc | locale("fa-IR")}}
```
{% endraw %}

و در نتیجه کاربر ۲۰۰,۰۰۰ ریال را در انتها مشاهده خواهد کرد.

- `join`

اگر بخواهید آرایه‌ای از رشته را بنویسید و با نمادی (معولا از **,** استفاده می‌شود.) آن‌ها را از هم جدا کنید، باید از فیلتر **join** استفاده کنید.

{% raw %}
```
{{abc | join(', ')}}
```
{% endraw %}

که در آخر چیزی که در متن دریافتی پیام به کاربر نمایش داده می‌شود، به شکل زیر خواهد بود:
  
**[a,b,c,d]**
 
>`نکته`: منظور از **abc**، متن پیامی است که به کاربران ارسال می‌کنید.

>`نکته`: برای کسب اطلاعات بیشتر [این لینک](https://github.com/jalaali/moment-jalaali) را مطالعه کنید.


>`نکته:` شخصی‌سازی محتوای پیام قابلیت اختصاصی چابک است. در صورتی که مایل هستید در حسابتان فعال شود، با [تیم فروش](https://chabok.io/contact.html) تماس بگیرید.

<Br>

##### پیش‌نمایش محتوا

در پیش‌نمایش محتوا شما می‌توانید علاوه بر متن پیامتان، **تصویر** و **دکمه‌ای** که قرار می‌دهید را قبل از ارسال در تمام پلتفرم‌ها مشاهده کنید و از مناسب بودن آن اطمینان یابید.

![enter image description here](http://uupload.ir/files/myzr_preview.png)

<Br>

<Br>

#### نوتیفیکیشن پیشرفته (Rich Notification)

در این قسمت می‌توانید نوتیفیکیشن چند رسانه‌ای (**Rich Notification**) شامل تصویر، آیکون، دکمه،‌ لینک مقصد و ... ارسال کنید. 

![عکس مربوطه](http://uupload.ir/files/n5k6_rich-push.png)

##### تصویر

در اینجا می‌توانید تصویری که می‌خواهید برای نوتیفیکیشن قرار دهید را آپلود کنید.

>‍‍‍‍‍` نکته:` دقت داشته باشید تصویری که برای **اندرویدی‌ها** استفاده می‌کنید از ویژگی‌های زیر برخوردار باشد:
>
>- نسخه سیستم عامل دستگاه کاربر باید حداقل اندروید ۴ یا بیشتر را با api سطح ۱۶ داشته باشند.
>- Ratio: 2.1 (سعی کنید محتوای اصلی 43:24 (~1.79) باشد زیرا بعضی دستگاه‌ها بیشتر از این مقدار را نشان نمی‌دهند)
>
>- Resolution (محدودیتی ندارید اما توصیه می‌کنیم از ابعاد زیر استفاده کنید):
>
> حداقل- 512x256
>
> متعادل- 1440x720
>
> حداکثر- 2880x1440

>‍‍‍‍‍` نکته:` دقت داشته باشید تصویری که برای **آی‌او‌اس** استفاده می‌کنید از ویژگی‌های زیر برخوردار باشد:
>
>- نسخه سیستم عامل دستگاه کاربر باید حداقل ۱۰ باشد.
>- حداکثر طول و عرض عکس ۱۰۳۸ پیکسل می‌باشد. اگر ارتفاع عکس از ۱۰۳۸ پیکسل بیشتر باشد عکس به صورت خودکار کوچکتر نمایش داده می‌شود و باعث می‌شود عکس از طرفین صفحه نمایش با فاصله قرار گیرد. برای جلوگیری از این موضوع عرض عکس را ۱۰۳۸ پیکسل قرار دهید و ارتفاع را کمتر از ۱۰۳۸ پیکسل در نظر بگیرید.
>- بسته به نیاز می‌توانید از عکس در حالت افقی یا عمودی برای اعلان‌ها استفاده کنید ولی برای نمایش بهتر در گوشی توصیه می‌کنیم از عکس در حالت افقی استفاده کنید.
>- در نسخه آی‌او‌اس ۱۲، عکس اعلان‌ها با یکی از دو نسبت ۱:۱ یا ۳:۲ نمایش داده می‌شوند. درصورتی که نسبت طول به عرض عکس با اندازه‌های گفته شده تطابق نداشته باشد، عکس بصورت خودکار توسط سیستم‌ عامل بریده می‌شود.
   عدم رعایت این مورد باعث می‌شود عکس به صورت کامل نمایش داده نشود.


در این قسمت می‌توانید برای نوتیفیکیشن، دکمه (اکشن) بگذارید.

 فقط کافی است **شناسه** و **عنوان** دکمه را وارد کنید. علاوه بر آن در **آی‌اواس** می‌توانید نوع دکمه را مشخص کنید:

- دکمه‌ای که برای آن باید حتما قفل دستگاه باز باشد. 

- دکمه‌ای که برای آن باید اپلیکیشن باز باشد. 

- دکمه‌ای که برای آن متن قرمز شود. این گزینه برای اعمالی است که نیاز به هشدار دارند. به عنوان مثال لغو سفارش، خروج از حساب یا حذف حساب و ... .

همچنین در اندروید می‌توانید برای دکمه‌های نوتیفیکیشن **آیکون** بگذارید.

##### تنظیمات پلتفرم‌ها

در هر کدام از پلتفرم‌های اندروید، آی‌اواس و وب می‌توانید تنظیماتی را روی نوتیفیکیشن قرار دهید.

**اندروید**: تنظیمات مربوط به نحوه نمایش آیکون روی گوشی‌های اندرویدی:

- **رنگ نمایش LED:** در این قسمت، می‌توانید انتخاب ‌کنید که با دریافت این پیام، رنگ LED گوشی کاربر به چه رنگی روشن شود؟

- **آیکون کوچک:**  اگر می‌خواهید برای این پیام، مطابق عکس پایین یک آیکون کوچک نمایش دهید، باید این عکس را داخل پروژه در مسیر drawable قرار دهید و بعد از آن نام فایل آیکون را در این بخش وارد کنید.

- **آیکون بزرگ:** اگر می‌خواهید برای این پیام، مطابق عکس پایین یک آیکون بزرگ نمایش دهید، آیکون را در محلی آپلود کنید و لینک آیکون را در این بخش وارد کنید.

>`نکته`: توجه داشته باشید که آیکون‌ها باید در یکی از ۲ فرمت PNG یا JPEG باشند. 


**آی‌اواس**: از اینجا با وارد کردن نام دسته (category) نوتیفیکیشن، می‌توانید **دکمه‌ها و به طور کلی قالب نوتیفیکیشن** را مانند نوتیفیکیشن‌های از قبل ذخیره شده (مربوط به این دسته) قرار دهید.

>`نکته:` در آی‌اواس برای اینکه خودتان نمایش نوتیفیکیشن را بر عهده بگیرید (استفاده از **Notification Content Extension**) باید **نام دسته (category)** مورد نظر را در اینجا قرار دهید.

**وب**: از اینجا می‌توانید آیکون و لینک مقصد در صورت کلیک روی نوتیفیکیشن بگذارید.

- برای انتخاب آیکونی که قرار است روی وب‌پوش کاربران نمایش داده شود، فقط کافیست آیکون را در محلی آپلود کنید و لینک آیکون را در این محل وارد کنید.

<img src="http://uupload.ir/files/wvj7_rich-notification-panel.png" alt="Its You" height="600px" width="400px">

##### گروه‌بندی نوتیفیکیشن (collapse_key/thread_id)

از این طریق می‌توانید نوتیفیکیشن‌های خود را گروه‌بندی کنید تا در صورت دریافت بیش از یک عدد به جای زیر هم نمایش داده شدن به طور جداگانه، نوتیفیکیشن‌های مربوط جمع شوند (collapse).

##### لینک مقصد

در این قسمت تعیین می‌کنید کلیک روی نوتیفیکیشن به چه مقصدی هدایت شود.

>`نکته:` در لینک مقصد می توانید از دیپ لینک هم برای اندروید و آی‌اواس استفاده کنید.


<Br>

#### نحوه تحویل پیام

در قسمت **سیاست تحویل**، شما تعیین می‌کنید که کاربر در چه موقعیتی پیامتان را دریافت کند. چابک ۳ شرایط از پیش تعیین شده (**درون برنامه‌ای**، **زنده**، **بدون اعلان**) را برای این هدف قرار داده است. برای آسانی کار توضیح هر شرایط در جلوی آن نوشته شده است.

سیاست **درون برنامه‌ای**:‌ پیام زمانی که اپ روی دستگاه کاربر باز است دریافت می‌شود.

سیاست **زنده**: پیام فقط در صورت باز بودن اپ در لحظه ارسال دریافت می‌شود. در صورتی که اپ باز نباشد اما اینترنت دستگاه کاربر وصل باشد اعلان پیام دریافت خواهد شد.

سیاست **بدون اعلان**: پیام بدون اعلان دریافت می‌شود. 

![عکس مربوطه](http://uupload.ir/files/1s3n_receiving-policy.png)

<Br>

#### پیام جایگزین

در قسمت آخر هم یکی از ویژگی‌های منحصر به فرد چابک قرار گرفته که همان **پیام جایگزین** است. به این ترتیب که شما می‌توانید در صورت نرسیدن پیامتان به هر دلیلی، یک **پیامک خودکار** ارسال کنید و فرصت تعامل با او را از دست ندهید. از این ویژگی می‌توانید در **پیام‌های خصوصی** خود بهره ببرید. 

![عکس مربوطه](http://uupload.ir/files/8koh_sms.png)