---  
id: tracker  
title: ترکر نصب  
layout: cordova  
permalink: cordova/tracker.html  
prev: sdk-setup.html  
next: custom-data.html  
---
  
ترکر چابک کلیک و نصب کمپین‌ها را شمارش می‌کند. همینطور با توجه به قابلیت [رصد رویدادها](/cordova/tracker.html#۲۱-رصد-رویدادها-tracking-events) می‌توانید مدل‌های بازاریابی CPI و CPA را برای تبلیغات خود اجرا کنید. مزیت دیگر ترکر چابک [حذف و جلوگیری تقلب](/cordova/tracker.html#۵-مکانیزم-ضد-تقلب-fraud-prevention) در کمپین‌های تبلیغاتی است.  
  
 نگران راه‌اندازی هم نباشید این صفحه به طور کامل مراحل **پیاده‌سازی و استفاده از ترکر** را قدم به قدم مرور می‌کند.    
  
<br>  
  
>‍‍`نکته:` در صورتی که از قبل **SDK** چابک را نصب کرده‌‌اید، از [**رصد رویدادها**](/cordova/tracker.html#۲۱-رصد-رویدادها-tracking-events) شروع کنید.  
  
  
### ۱. پیاده‌سازی (SDK Integration)  
---  
  
برای ایجاد حساب کاربری کافیست در وبسایت چابک وارد صفحه [شروع کنید](https://chabok.io/register.html) شوید و حساب شخصی خود را بسازید. پس از ایجاد حساب و ثبت اپلیکیشن خود، با مراجعه به بخش [تنظیمات پنل](https://sandbox.push.adpdigital.com/front/setting/access) پارامترهای اتصال به چابک که در مرحله [مقداردهی](/cordova/tracker.html#ج--مقداردهی-initialize) مورد نیاز است، در دسترس خواهد بود.  
  
#### ۱.۱. مراحل پیاده‌سازی   
برای راه‌اندازی SDK چابک **۳ مرحله** زیر را به ترتیب انجام ‌دهید:  
  
[الف- دانلود فایل پیکربندی](/cordova/tracker.html#الف---دانلود-فایل-پیکربندی)    
    
[ب- نصب کتابخانه و راه‌اندازی](/cordova/tracker.html#ب--نصب-کتابخانه-و-راهاندازی)    
    
[ج- ثبت کاربر](/cordova/tracker.html#ج--ثبت-کاربر)    
    
<Br>    
  
### الف-  دانلود فایل پیکربندی  
  
#### ۱-۱-  کتابخانه چابک  
  
<br>    
۱. ابتدا از پنل خود وارد بخش **تنظیمات**> **دسترسی و توکن‌ها**> **کتابخانه موبایل**> **فعال‌سازی راه‌اندازی هوشمند**> شوید و فایل‌های **Chabok.sandbox.json** یا **Chabok.production.json** و  **Chabok.sandbox.plist** یا **Chabok.production.plist** را بسته به محیطتان دانلود کنید.
    
<p class="text-center">    
<img  src="https://github.com/chabok-io/chabok-assets/raw/master/chabok-docs/cordova/smart-setup.png">    
</p>    

>`نکته:`  برای غیرفعال کردن قابلیت **پوش نوتیفیکیشن**(pushNotification)، کافیست مقدار پیش ‌فرض آن را در فایل دانلود شده تغییر بدید.

   
> `نکته:` دقت داشته باشید که **قابلیت آنی (realtime)**  چابک به طور پیش فرض **غیر فعال** است. برای فعال کردن مقدار قابلیت آنی (realtime)، کافی است مقدار پیش‌فرض آن را در فایل دانلود شده تغییر بدید. این قابلیت در[ پیام چابک](/android/chabok-messaging.html) و [پیام‌رسانی آنی](/android/event-handling.html) استفاده می‌شود.    
   
#### ۲-۱-  دانلود فایل راه‌اندازی فایربیس   
فایل `google-services.json` را از پنل فایربیس دانلود کنید. برای دانلود این فایل، مراحل زیر را طی کنید:  
  
  ۱. به <a href="https://console.firebase.google.com/">پنل فایربیس</a> خود وارد شوید و پروژه را باز کنید.  
    
  ۲. بر روی آیکون تنظیمات کلیک کنید و گزینه  **Project settings** را انتخاب نمایید.  
    
   ۳. از لیست اپلیکیشن‌ها، اپلیکیشن مورد نظر خود را انتخاب کنید.  
     
   ۴. بر روی `google-services.json` کلیک کنید و آن را دانلود کنید.  
   
  فایل‌های دانلود شده را در مسیر **اصلی پروژه** خود قرار دهید همانند تصویر زیر:
    
<p class="text-center">    
<img  src="https://github.com/chabok-io/chabok-assets/raw/master/chabok-docs/cordova/cordova-chabok-config-file.png">    
</p>    


### ب- نصب کتابخانه و راه‌اندازی  

برای نصب محیط آزمایشی (سندباکس) از طریق `cordova-cli` :    
    
```bash 
cordova plugin add com.chabokpush.cordova --variable CHABOK_ENVIRONMENT=SANDBOX  
```  
  و یا برای نصب محیط عملیاتی از طریق `cordova-cli` :    
    
```bash 
cordova plugin add com.chabokpush.cordova --variable CHABOK_ENVIRONMENT=PRODUCTION  
```  
  
####   مقداردهی اولیه جاوااسکریپ     
 مقداردهی اولیه در جاوا اسکریپ به صورت زیر انجام می‌شود.    
     
```javascript 
 const chabok = new ChabokPush();   
```  


### ج- ثبت کاربر  
  
یکی از مزیت‌های چابک نسبت به درگاه‌های ارسال پوش‌نوتیفیکیشن، امکان **معرفی** هر کاربر با یک شناسه منحصر به فرد است. این قابلیت به شما امکان می‌دهد دستگاه‌های کاربر را **مدیریت کنید** و سوابق جمع‌آوری شده را همانند یک سیستم مدیریت مشتریان (CRM) در اختیار داشته باشید.         
این شناسه می‌تواند برای **دستگاه‌های متعدد یک کاربر** استفاده شود. شناسه کاربر می‌تواند هر فیلد با ارزش و معنا‌دار برای کسب و کار شما باشد که کاربر خود را با آن شناسایی می‌کنید. **شماره موبایل**، **کدملی**، **شماره‌حساب**، **ایمیل** و یا حتی **شناسه دیتابیس‌تان** مثال‌هایی از شناسه‌های کاربری مناسب در موارد واقعی هستند. ارسال پیام‌ به کاربران توسط همین شناسه‌ها و بدون استفاده از توکن یا شناسه گوشی، به سادگی امکان پذیر خواهد بود.        
   
#### ورود به حساب کاربری (login)  
متد لاگین تنها زمانی فراخوانی شود که کاربر در اپلیکیشن لاگین یا ثبت‌نام می‌کند. نیازی به فراخوانی این متد در هر بار اجرای اپلیکیشن نیست.  
  
<p>  
فقط شناسه کاربر را گرفته و کاربر را با آن شناسه بر روی سرور چابک ثبت‌ نام می‌کند.  
</p>  
  
```java  
chabok.login("user_id");  
```  
  
>`نکته:` مقدار `USER_ID` می‌تواند **بین ۳ تا ۶۴** کاراکتر باشد. زبان فاسی، کاراکترهای `#,+,*,\,/` و فاصله هم در آن **مجاز نیستند**.  
  
  
#### خروج از حساب کاربری (logout)  
  
در صورتی که کاربر از حساب کاربری خود خارج شد، با فراخوانی متد زیر می‌توانید کاربر را همچنان با یک تگ مهمان در سیستم خود داشته باشید و تعاملتان را با او ادامه دهید.  
  
```java  
chabok.logout();  
```  
  
  
#### ۲.۱. رصد رویدادها (Tracking Events)  
  
رویدادها در واقع همان تعامل کاربر با اپلیکیشنتان است. از این رو آن‌ها را **رفتار** کاربر می‌نامیم. شما می‌توانید رفتار کاربر را در اپلیکیشن خود به طور **لحظه‌ای** رصد کنید. این امر به شما امکان می‌دهد تا **CPA های پیشرفته** برای کمپین‌هایتان [تعریف کنید](/panel/tracker.html#افزودن-cpa) و نصب‌هایتان با تحقق اهدافی که برای کاربران تعیین کرده‌اید شمرده شوند.   
  
  
با کد زیر می‌توانید رفتار کاربر (رویداد) را در چابک رصد کنید:    
    
  
برای رصد رفتارها باید از متد `track` استفاده کنید. این متد دارای ورودی **نام** و **داده** رفتار (`YOUR_TRACK_NAME`,`data`) می‌باشد.  
  
  
```javascript  
this.chabok.track('YOUR_TRACK_NAME', {"KEY":"VALUE"})  
```  
  
> نکته : مقدار `data` در متد `track` یک داده مربوط به رویداد‌ می‌تواند باشد. شما این مقدار را می‌توانید به عنوان `Object` همراه رویداد‌ در نظر بگیرید.  
  
  
پس از اعمال کد بالا، رفتار با هر بار رخ دادن به همراه زمان وقوع ذخیره خواهد شد.  
  
 به عنوان مثال می‌خواهید رفتار **خرید‌های پوشاک** از فروشگاه اینترنتی خودتان را رصد کنید. برای ثبت این رفتار کد زیر را با الگوی بالا وارد می‌نماییم.  
  
نمونه:  
  
```javascript  
const data = { "clothes_id": 35147652}  
  
this.chabok.track('purchase-clothing', data)  
```  
  
<Br>  
    
    
برای اطلاعات بیشتر مربوط به رصد رویدادها [اینجا](/cordova/behavior-tracking.html) را مطالعه کنید.  
  
  
#### ۳.۱. تست راه‌اندازی   
اگر عملیات ثبت‌ کاربر به درستی انجام شده باشد، اطلاعات کاربر در [پنل](https://sandbox.push.adpdigital.com/front/users/subscribers/list)  چابک قسمت **کاربران** قابل مشاهده خواهد بود.    
  
البته محیط آزمایشی فقط برای تست و آشنایی با امکانات است و دارای محدودیت سقف کاربر می‌باشد. بنابراین برای اپلیکیشن‌های تجاری و اپ‌استور توصیه می‌کنیم از حساب عملیاتی که این سقف را ندارد، استفاده کنید.  
  
#### ۴.۱. انتشار اپلیکیشن در استورها  
  
به طور کلی چابک دارای دو نوع حساب رایگان (محیط آزمایشی) و عملیاتی  است. در صورتی که روی حساب رایگان هستید می‌توانید روی همان حساب نسخه جدید را منتشر کنید.  
  
 داده‌های شما از حساب رایگان به عملیاتی به هیج وجه منتقل نمی‌شوند و برای انتقال باید آپدیت فوری از اپلیکیشن خود بدهید و تمام کاربران را به نسخه جدید بیاورید. برای همین در صورتی هم که حساب عملیاتی دارید  باید حتما **روی محیط عملیاتی** نسخه جدید اپلیکیشن خود را در استورها منتشر کنید.  
  
<br><br>  
  
### ۲. ترک نصب‌ها (Tracking Installs)  
---  
  پس از اینکه راه‌اندازی SDK چابک را در اپلیکیشنتان انجام دادید می‌توانید برای کمپین‌های نصب خود ترکر فعال کنید.   
  
#### ۱.۲. ایجاد لینک ترکر   
برای ایجاد لینک ترکر فقط کافیست وارد صفحه **ترکر** پنل شوید و **ترکر جدید** بسازید. همینطور شما می‌توانید به لینک ترکر خود پارامتر [اضافه کنید](/panel/tracker.html#پارامتر-در-لینک-ترکر).  
  
  
 برای اطلاعات بیشتر درباره ایجاد ترکر جدید در پنل و مشاهده نمونه‌ای از آن می‌توانید به مستندات [پنل](/panel/tracker.html#ایجاد-ترکر-جدید) مراجعه کنید.  
  
  
**نمونه لینک ترکر چابک**:  
  
حساب‌ رایگان:  
  
{% tabs %}  
{% tab sandbox %}  
```bash  
https://sand.chabokpush.com/JY@4sc  
``` {% endtab %}  
{% tab production %}   
حساب عملیاتی:  
  
```bash  
https://a.chabok.io/JY@4sc  
``` {% endtab %}  
{% endtabs %}  
  
#### ۲.۲. انتشار لینک ترکر   
پس از ایجاد یک ترکر جدید و گرفتن لینک آن کافی است آن را در کمپین‌های نصب خود قرار دهید.  
با این کار ترکر شما فعالیت خود را آغاز می‌کند و از این پس هر کلیک و نصب به صورت لحظه‌ای در پنل به نمایش گذاشته خواهد شد.  
  
  
<br><br>  
  
### ۳. ترک کمپین‌های نصب از استور‌ها  
---  
  
شما می‌توانید  نصب‌های خود که از استور‌های مختلف اندروید و آی‌او‌اس گرفته‌اید را ترک کنید.   
  
##### روش آی‌دی ترکر (Pre-Install Campaigns)  
  
شما می‌توانید منبع (Source) نصب را در کمپین خود بفهمید. برای انجام این کار باید در ابتدا ترکر خود را در پنل ایجاد کنید و **آی‌دی ترکر** را در کد پروژه خود قرار دهید.   
  
```java  
chabok.setDefaultTracker("YOUR_TRACKER_ID");  
```  
  
>`نکته:` دقت داشته باشید که `TRACKER_ID` شناسه ۶ کاراکتری است که در لینک ترکر شما وجود دارد. به عنوان مثال در لینک `https://sand.chabokpush.com/JY@4sc` آی‌دی ترکر `JY@4sc` می‌باشد. این آی‌دی را می‌توانید از پنل>ترکر>جزئیات ترکر مانند تصویر زیر کپی کنید:  
  
![عکس مربوط](http://uupload.ir/files/bjbc_tracker-analytics-s.png)  
  
<br><br>  
  
### ۴. کال‌بک‌های ترکر (Callbacks)  
---  
  
در صورتی هم که می‌خواهید داده‌های ترکر را در سیستم‌های دیگر از جمله سرورهای خود دریافت کنید می‌توانید از کال‌بک استفاده کنید. این کار را می‌توانید از پنل هنگام ایجاد ترکر جدید انجام دهید. به این ترتیب لینکی که می‌خواهید زمان رخ دادن رویداد (کلیک یا نصب) فرخوانی شود را وارد می‌کنید.   
  
همچنین شما می‌توانید در کال‌بک خود از پارامترهایی برای اطلاعات بیشتر از مبدا رویداد کسب کنید. برای مشاهده این پارامترها و نمونه لینک کال‌بک می‌توانید به مستندات [پنل](/panel/tracker.html#کالبک) مراجعه کنید.  
  
<br><br>  
  
### ۵. مکانیزم ضد تقلب (Fraud Prevention)  
---  
  
SDK چابک به گونه‌ای پیاده‌سازی شده است که امکان تقلب و نصب غیر واقعی در روش‌های مبتنی بر نصب و رفتار (CPA و CPI) را به طور کامل از بین می‌برد. علاوه بر آن، به هیج وجه فراخوانی و رصد رویداد‌های چابک قابل دستکاری نیستند.   
  
مواردی که چابک برای حذف تقلب انجام می‌دهد عبارتند از:  
  
- **IP Filtering**:  
  
آی‌پی کاربر را در زمان کلیک و نصب تطبیق می‌دهد، جلوی نصب‌های متعدد با یک آی‌پی را می‌گیرد و همچنین آی‌پی‌های ناشناخته را رد می‌کند.  
  
- **User Verification**:  
  
با توجه به ساختار کاربر محور بودن سیستم چابک، تمام اطلاعات کاربر در کلیک و نصب را مقایسه می‌کند تا واقعی بودن کاربر جذب شده مشخص شود.  
  
- **SDK Signature**:  
  
روی SDK امضای خاصی را می‌گذارد تا هنگام کلیک دریافت شود و پس از نصب با اپلیکیشن شما تطبیق داده شود. همچنین یکی از راه‌های مقابله با **SDK Spoofing** است. SDK Spoofing یکی از راه‌های تقلب است که نصب‌ها را روی دستگاه‌های واقعی شبیه‌سازی می‌کند و آن را جزو نصب‌های کمپین محاسبه می‌نماید. این کار معمولا از اپلیکیشن‌های دیگر روی دستگاه صورت می‌گیرد و نصب‌های بی‌شمار غیر واقعی را وارد کمپین‌ شما می‌کند.  
  
  
- **Server to Server Verification**:  
  
اطلاعات کاربر را هنگام کلیک جمع‌آوری می‌کند و با اطلاعاتی که سرور شما در هنگام نصب دریافت می‌کند اعتبارسنجی می‌نماید؛ در صورت عدم تطابق، نصب را رد می‌کند.  
  
- **TTI**:  
  
زمان قابل قبول بین کلیک و نصب است. چابک به طور خودکار فاصله زمانی بسیار کوتاه را رد می‌کند و همینطور در صورتی که از محدوده‌ای که شما تعیین کرده‌اید بیشتر شود ([محدوده اتریبیوشن](/panel/tracker.html#محدوده-اتریبیوشن))، نصب شمرده نخواهد شد.  
  
- **Two-Phase Authentication**:  
  
احراز هویت برای تشخیص واقعی بودن کاربر در هنگام نصب است. در چابک این کار از طریق ارسال پیام کوتاه انجام می‌شود.  
  
<br><br>  
  
### ۶. آشنایی با برخی مفاهیم ترکر  
---  
  
- **اتریبیوشن**: نصب‌هایی که از طریق کمپین‌های تبلیغاتی شمرده می‌شوند.  
  
- **بازدید**: هر بار که اپلیکیشن باز شود یک بازدید محاسبه می‌شود.  
  
- **ترکر**: ابزار شمارش و رصد کمپین‌های تبلیغاتی را ترکر می‌نامند.  
  
- **رد شده**: نصب‌ها و کلیک‌هایی که غیر واقعی تشخیص داده می‌شوند و در شمارش محاسبه نمی‌شوند.  
  
- **رویداد**: هرگونه تعامل کاربر با اپلیکیشن، یک رویداد در نظر گرفته می‌شود.   
  
- **نصب**: اولین بازدید هر کاربر نصب به حساب می‌آید.